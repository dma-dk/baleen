# Database Configuration - defaults to H2, configurable via environment variables
spring.datasource.url=${DATABASE_URL:jdbc:h2:mem:baleen;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
spring.datasource.driver-class-name=${DATABASE_DRIVER:org.h2.Driver}
spring.datasource.username=${DATABASE_USERNAME:sa}
spring.datasource.password=${DATABASE_PASSWORD:}

# H2 Console Configuration (for development)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# JPA/Hibernate Configuration
# Liquid base takes care of creating entities, we should only validate here
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true

# Liquibase Configuration
spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.yaml
spring.liquibase.enabled=true
spring.liquibase.drop-first=false
spring.liquibase.contexts=${LIQUIBASE_CONTEXTS:default}

# SQL initialization for spatial functions (disabled in favor of Liquibase)
spring.sql.init.mode=never
spring.sql.init.platform=${DATABASE_TYPE:h2}

# Server configuration
server.port=${SERVER_PORT:8080}

# Enable SQL logging (optional)
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# SECOM Configuration
secom.security.ssl.keystore=secom/keystore.p12
secom.security.ssl.keystore-type=PKCS12
secom.security.ssl.keystore-password=${KEYSTORE_PASSWORD:changeit} 

secom.security.ssl.truststore=secom/truststore.p12
secom.security.ssl.truststore-type=PKCS12
secom.security.ssl.truststore-password=changeit
secom.security.ssl.insecureSslPolicy=false

# Service Registry Configuration
secom.service-registry.url=${SERVICE_REGISTRY_ENDPOINT:https://msr.maritimeconnectivity.net/api/secom} 

# Niord Configuration
niord.endpoint=${NIORD_ENDPOINT:https://niord.t-dma.dk}

# Management endpoints
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always
management.info.env.enabled=true
management.endpoint.health.probes.enabled=true
management.health.livenessstate.enabled=true
management.health.readinessstate.enabled=true